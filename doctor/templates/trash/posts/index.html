{% extends "layout.html" %} {% block content %}
<style>
  :root {
    --dispHeader: none !important;
  }
  .article-img {
    border-radius: 100% !important;
    width: 75px !important;
    height: 75px !important;
  }

  .post-details {
    display: flex;
    flex-direction: column;
    margin-left: 10px;
  }

  .username {
    font-size: 1.05rem;
    font-weight: 500;
  }

  .article-title {
    font-size: 1.6rem;
  }
</style>
<script>
  window.onload = () => {
    document.querySelectorAll(".nav-item").forEach((n) => {
      if (n.innerText == "Posts") {
        n.classList.add("active");
      }
    });
  };
</script>
<div class="my-5 card">
  <div class="card-header d-flex justify-content-between">
    <h4>Posts</h4>

    <a href="{{ url_for('new_post') }}" class="btn btn-sm btn-primary">
      New Post</a
    >
  </div>
  <div class="card-body row">
    {% for post in posts.items %}
    <div class="col-3 m-0 p-1">
      <div class="card my-2 p-0">
        <div class="card-header d-flex align-items-center">
          <img
            class="rounded-circle article-img"
            src="{{ url_for('static', filename='profile_img/' + post.author.image_file) }}"
          />

          <div class="post-details">
            <a
              class="mr-2 username"
              href="{{ url_for('posts_user', username=post.author.username) }}"
              >{{ post.author.username }}</a
            >
            <small class="text-muted">
              {{ diffHumans(post.date_posted) }}
            </small>
          </div>
        </div>

        <div class="card-body">
          <div class="article-metadata"></div>
          <h2>
            <a
              class="article-title"
              href="{{ url_for('post', post_id=post.id) }}"
              >{{ post.title }}</a
            >
          </h2>
          <p class="article-content">{{ post.content }}</p>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
  <div class="card-footer">
    <div class="d-flex align-items-center justify-content-center mt-4">
      {% for page_num in posts.iter_pages(left_edge=1, right_edge=1,
      left_current=1, right_current=2) %} {% if page_num %} {% if posts.page ==
      page_num %}
      <a
        class="btn btn-primary mb-4"
        href="{{ url_for('posts', page=page_num) }}"
        >{{ page_num }}</a
      >
      {% else %}
      <a
        class="btn btn-outline-primary mb-4"
        href="{{ url_for('posts', page=page_num) }}"
        >{{ page_num }}</a
      >
      {% endif %}
    </div>
  </div>
</div>

{% else %} ... {% endif %} {% endfor %} {% endblock content %}
